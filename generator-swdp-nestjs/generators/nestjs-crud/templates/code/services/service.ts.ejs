import { Injectable } from '@nestjs/common';
import { InjectModel } from '@nestjs/mongoose';
import { Model } from 'mongoose';
import { <%=model%>, <%=model%>Document } from '../entities/<%=selector%>.entity';

@Injectable()
export class <%=model%>Service {
    constructor(
        @InjectModel(<%=model%>.name) private <%=model.toLowerCase()%>Model: Model<<%=model%>Document>
    ) { }

    async findAll(): Promise<<%=model%>[]> {
        return this.<%=model.toLowerCase()%>Model.find().exec();
    }

    async findById(id: string): Promise<<%=model%>> {
        return this.<%=model.toLowerCase()%>Model.findById(id).exec();
    }

    async create(<%=model.toLowerCase()%>: <%=model%>): Promise<<%=model%>> {
        return this.<%=model.toLowerCase()%>Model.create(<%=model.toLowerCase()%>);
    }

    async update(id: string, <%=model.toLowerCase()%>: <%=model%>): Promise<<%=model%>> {
        return this.<%=model.toLowerCase()%>Model.findByIdAndUpdate(id, <%=model.toLowerCase()%>, {new: true});
    }

    async delete(id: string): Promise<<%=model%>> {
        return this.<%=model.toLowerCase()%>Model.findByIdAndRemove(id).exec();
    }
}